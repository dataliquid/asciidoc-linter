$schema: https://json-schema.org/draft/2020-12/schema
$id: https://dataliquid.com/asciidoc/linter/schemas/rules/metadata-schema.yaml
title: Document Metadata Configuration Schema
description: Schema for validating document metadata configuration in AsciiDoc linter
type: object
properties:
  attributes:
    type: array
    description: List of metadata attributes to validate
    items:
      type: object
      properties:
        name:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/rule-name-type'
          pattern: "^[a-zA-Z][a-zA-Z0-9_-]*$"
        order:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/order-type'
        required:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/required-property-type'
          default: false
        minLength:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/minLength-property-type'
        maxLength:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/maxLength-property-type'
        pattern:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/pattern-property-type'
        severity:
          $ref: 'https://dataliquid.com/asciidoc/linter/schemas/rules/types/common-types.yaml#/$defs/severity-type'
        allowedValues:
          type: array
          description: List of allowed values for this attribute
          items:
            type: string
          minItems: 1
          uniqueItems: true
      required: [name, severity]
      additionalProperties: false
    minItems: 1
    uniqueItems: true
required: [attributes]
additionalProperties: false
examples:
  - attributes:
      - name: title
        order: 1
        required: true
        minLength: 5
        maxLength: 100
        pattern: "^[A-Z].*"
        severity: error
      - name: author
        order: 2
        required: true
        minLength: 5
        maxLength: 50
        pattern: "^[A-Z][a-zA-Z\\s\\.]+$"
        severity: error
      - name: revdate
        order: 3
        required: true
        pattern: "^\\d{4}-\\d{2}-\\d{2}$"
        severity: error
      - name: version
        order: 4
        required: true
        pattern: "^\\d+\\.\\d+(\\.\\d+)?$"
        severity: error
      - name: email
        required: false
        pattern: "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
        severity: warn